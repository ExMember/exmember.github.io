<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>Tree Specs vs. Exception Specs | Damien Burke</title>







<meta name="twitter:card" content="summary" />
<meta name='twitter:site:id' content='@exmember'>
<meta name='twitter:title' content='Tree Specs vs. Exception Specs'>
<meta name='twitter:creator:id' content='@ExMember'>
<meta name='twitter:image' content='/images/about-me/actor.jpg'>

<meta property='og:locale' content='en'>
<meta property='og:site_name' content='Damien Burke'>
<meta property='og:title' content='Tree Specs vs. Exception Specs'>
<meta property='og:type' content='website'>
<meta property='og:url' content='https://damienburke.com/tree-specs-vs-exception-specs'>
<meta property='og:description' content='Tree Specs vs. Exception Specs'>
<meta property='og:image' content='/images/about-me/actor.jpg'>

    



<link rel="stylesheet"
  href="/assets/css/uswds-theme.css"
  media="screen">


    
  </head>
  <body class="  ">

    <a class="usa-skipnav" href="#main-content">Skip to main content</a>

    




  <div class="usa-overlay"></div>

  <header class="usa-header usa-header--extended" role="banner">


  
    <div class="usa-navbar">
      <div class="usa-logo" id="header-logo">
        <a
          href="/"
          title="Home">
          
          <em class="usa-logo__text">
            Damien Burke
          </em>
        </a>
      </div>
      <button class="usa-menu-btn">Menu</button>
    </div>

    <nav role="navigation" class="usa-nav">
      <div class="usa-nav__inner">
        <button class="usa-nav__close">
          <img src="/assets/uswds/img/close.svg" alt="close">
        </button>

        
        
        
        <ul class="usa-nav__primary usa-accordion">
          
          <li class="usa-nav__primary-item">
            
              <a class=" usa-nav__link  " href="https://www.talariasoftware.com">
                <span>Talaria Software</span>
              </a>
            
          </li>
          
          <li class="usa-nav__primary-item">
            
              <a class=" usa-nav__link  " href="https://www.neverbust.com">
                <span>Neverbust</span>
              </a>
            
          </li>
          
          <li class="usa-nav__primary-item">
            
              <a class=" usa-nav__link  " href="https://earlywords.io">
                <span>EarlyWords</span>
              </a>
            
          </li>
          
          <li class="usa-nav__primary-item">
            
              <a class=" usa-nav__link  " href="/everything">
                <span>Writing</span>
              </a>
            
          </li>
          
        </ul>
        

        

        
          
          <div class="usa-nav__secondary">
            <ul class="usa-unstyled-list usa-nav__secondary-links">
              
              
                <li class="usa-nav__secondary-item">
                  <a href=""
                  >
                    
                  </a>
                </li>
              
            </ul>
            
          </div>
          


        </div>
      </div>
    </nav>
  
  </header>




    
    


    

    

    
      
      




    
    

    
      <main id="main-content" class="usa-layout-docs usa-layout-docs__main desktop:grid-col-9 usa-prose">
        <div class="usa-section">
  <div class="grid-container">
    <div class="grid-row grid-gap flex-align-start">
      
      

      <main class="usa-layout-docs usa-layout-docs__main usa-prose" id="main-content">
        
          <h1>Tree Specs vs. Exception Specs</h1>
        
        <!-- 
Ignore this implementation of the post class. It's only here so we can run
the specs in this file using a magic incantation like this: 

```sh

sed -n '/^```/,/^```/ p' < _drafts/exception-spec-versus-tree-specs.md | sed '/^```/ d' | rspec /dev/stdin

```

```ruby
class Post
  attr_accessor :published_at
  attr_accessor :editor_approved
  attr_accessor :translated

  def initialize(published_at: nil, editor_approved: false, translated: false)
    @published_at = published_at
    @editor_approved = editor_approved
    @translated = translated
  end

  def editable?
    !published_at && !editor_approved && !translated
  end
end
```
 -->

<p>After years of fighting, the zombies have been contained and now it’s time
to rebuild civilization. Everyone has a particular job to do in this
technological reboot and yours is to write a blog platform. It could be
worse. Someone is out there inspecting septic tank interiors.</p>

<p>Your post-apocalyptic project manager used to be a newspaper editor and as
such he’s a stickler for some journalism best practices. For instance, he
wants to make sure that posts cannot be edited after they have been
published.</p>

<p>So you write this spec:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">Post</span> <span class="k">do</span>
  <span class="n">describe</span> <span class="s2">"#editable?"</span> <span class="k">do</span>
    <span class="n">context</span> <span class="s2">"when the post is published"</span> <span class="k">do</span>
      <span class="n">subject</span> <span class="p">{</span> <span class="no">Post</span><span class="p">.</span><span class="nf">new</span> <span class="ss">published_at: </span><span class="no">Time</span><span class="p">.</span><span class="nf">now</span><span class="p">.</span><span class="nf">utc</span> <span class="p">}</span>

      <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">be_editable</span> <span class="p">}</span>
    <span class="k">end</span>

    <span class="n">context</span> <span class="s2">"when the post is not published"</span> <span class="k">do</span>
      <span class="n">subject</span> <span class="p">{</span> <span class="no">Post</span><span class="p">.</span><span class="nf">new</span> <span class="ss">published_at: </span><span class="kp">nil</span> <span class="p">}</span>

      <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">be_editable</span> <span class="p">}</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Before the cataclysm, your PM was a bit of a control freak. He almost
burst a blood vessel when a writer changed an article that he had already
approved. He wants to make sure that cannot happen in your new blog
platform.</p>

<p>So you modify your specs to look like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">Post</span> <span class="k">do</span>
  <span class="n">describe</span> <span class="s2">"#editable?"</span> <span class="k">do</span>
    <span class="n">subject</span> <span class="k">do</span>
      <span class="no">Post</span><span class="p">.</span><span class="nf">new</span> <span class="ss">published_at: </span><span class="n">published_at</span><span class="p">,</span> <span class="ss">editor_approved: </span><span class="n">editor_approved</span>
    <span class="k">end</span>

    <span class="n">context</span> <span class="s2">"when the post is published"</span> <span class="k">do</span>
      <span class="n">let</span><span class="p">(</span><span class="ss">:published_at</span><span class="p">)</span> <span class="p">{</span> <span class="no">Time</span><span class="p">.</span><span class="nf">now</span><span class="p">.</span><span class="nf">utc</span> <span class="p">}</span>

      <span class="n">context</span> <span class="s2">"when the editor has approved"</span> <span class="k">do</span>
        <span class="n">let</span><span class="p">(</span><span class="ss">:editor_approved</span><span class="p">)</span> <span class="p">{</span> <span class="kp">true</span> <span class="p">}</span>

        <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">be_editable</span> <span class="p">}</span>
      <span class="k">end</span>

      <span class="n">context</span> <span class="s2">"when the editor has not approved"</span> <span class="k">do</span>
        <span class="n">let</span><span class="p">(</span><span class="ss">:editor_approved</span><span class="p">)</span> <span class="p">{</span> <span class="kp">false</span> <span class="p">}</span>

        <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">be_editable</span> <span class="p">}</span>
      <span class="k">end</span>
    <span class="k">end</span>

    <span class="n">context</span> <span class="s2">"when the post is not published"</span> <span class="k">do</span>
      <span class="n">let</span><span class="p">(</span><span class="ss">:published_at</span><span class="p">)</span> <span class="p">{</span> <span class="kp">nil</span> <span class="p">}</span>

      <span class="n">context</span> <span class="s2">"when the editor has approved"</span> <span class="k">do</span>
        <span class="n">let</span><span class="p">(</span><span class="ss">:editor_approved</span><span class="p">)</span> <span class="p">{</span> <span class="kp">true</span> <span class="p">}</span>

        <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">be_editable</span> <span class="p">}</span>
      <span class="k">end</span>

      <span class="n">context</span> <span class="s2">"when the editor has not approved"</span> <span class="k">do</span>
        <span class="n">let</span><span class="p">(</span><span class="ss">:editor_approved</span><span class="p">)</span> <span class="p">{</span> <span class="kp">false</span> <span class="p">}</span>

        <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">be_editable</span> <span class="p">}</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>The newspaper industry was struggling even before the end of the world as
we knew it and your PM knows how important it is to pinch pennies. To
avoid paying translators more than once for the same article he wants to
make sure that no one changes an article after it has been translated.</p>

<p>So you modify your spec again. Now it looks like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">Post</span> <span class="k">do</span>
  <span class="n">describe</span> <span class="s2">"#editable?"</span> <span class="k">do</span>
    <span class="n">subject</span> <span class="k">do</span>
      <span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span>
        <span class="ss">published_at: </span><span class="n">published_at</span><span class="p">,</span>
        <span class="ss">editor_approved: </span><span class="n">editor_approved</span><span class="p">,</span>
        <span class="ss">translated: </span><span class="n">translated</span><span class="p">,</span>
      <span class="p">)</span>
    <span class="k">end</span>

    <span class="n">context</span> <span class="s2">"when the post is published"</span> <span class="k">do</span>
      <span class="n">let</span><span class="p">(</span><span class="ss">:published_at</span><span class="p">)</span> <span class="p">{</span> <span class="no">Time</span><span class="p">.</span><span class="nf">now</span><span class="p">.</span><span class="nf">utc</span> <span class="p">}</span>

      <span class="n">context</span> <span class="s2">"when the editor has approved"</span> <span class="k">do</span>
        <span class="n">let</span><span class="p">(</span><span class="ss">:editor_approved</span><span class="p">)</span> <span class="p">{</span> <span class="kp">true</span> <span class="p">}</span>

        <span class="n">context</span> <span class="s2">"when the post has been translated"</span> <span class="k">do</span>
          <span class="n">let</span><span class="p">(</span><span class="ss">:translated</span><span class="p">)</span> <span class="p">{</span> <span class="kp">true</span> <span class="p">}</span>

          <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">be_editable</span> <span class="p">}</span>
        <span class="k">end</span>

        <span class="n">context</span> <span class="s2">"when the post has not been translated"</span> <span class="k">do</span>
          <span class="n">let</span><span class="p">(</span><span class="ss">:translated</span><span class="p">)</span> <span class="p">{</span> <span class="kp">false</span> <span class="p">}</span>

          <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">be_editable</span> <span class="p">}</span>
        <span class="k">end</span>
      <span class="k">end</span>

      <span class="n">context</span> <span class="s2">"when the editor has not approved"</span> <span class="k">do</span>
        <span class="n">let</span><span class="p">(</span><span class="ss">:editor_approved</span><span class="p">)</span> <span class="p">{</span> <span class="kp">false</span> <span class="p">}</span>

        <span class="n">context</span> <span class="s2">"when the post has been translated"</span> <span class="k">do</span>
          <span class="n">let</span><span class="p">(</span><span class="ss">:translated</span><span class="p">)</span> <span class="p">{</span> <span class="kp">true</span> <span class="p">}</span>

          <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">be_editable</span> <span class="p">}</span>
        <span class="k">end</span>

        <span class="n">context</span> <span class="s2">"when the post has not been translated"</span> <span class="k">do</span>
          <span class="n">let</span><span class="p">(</span><span class="ss">:translated</span><span class="p">)</span> <span class="p">{</span> <span class="kp">false</span> <span class="p">}</span>

          <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">be_editable</span> <span class="p">}</span>
        <span class="k">end</span>
      <span class="k">end</span>
    <span class="k">end</span>

    <span class="n">context</span> <span class="s2">"when the post is not published"</span> <span class="k">do</span>
      <span class="n">let</span><span class="p">(</span><span class="ss">:published_at</span><span class="p">)</span> <span class="p">{</span> <span class="kp">nil</span> <span class="p">}</span>

      <span class="n">context</span> <span class="s2">"when the editor has approved"</span> <span class="k">do</span>
        <span class="n">let</span><span class="p">(</span><span class="ss">:editor_approved</span><span class="p">)</span> <span class="p">{</span> <span class="kp">true</span> <span class="p">}</span>

        <span class="n">context</span> <span class="s2">"when the post has been translated"</span> <span class="k">do</span>
          <span class="n">let</span><span class="p">(</span><span class="ss">:translated</span><span class="p">)</span> <span class="p">{</span> <span class="kp">true</span> <span class="p">}</span>

          <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">be_editable</span> <span class="p">}</span>
        <span class="k">end</span>

        <span class="n">context</span> <span class="s2">"when the post has not been translated"</span> <span class="k">do</span>
          <span class="n">let</span><span class="p">(</span><span class="ss">:translated</span><span class="p">)</span> <span class="p">{</span> <span class="kp">false</span> <span class="p">}</span>

          <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">be_editable</span> <span class="p">}</span>
        <span class="k">end</span>
      <span class="k">end</span>

      <span class="n">context</span> <span class="s2">"when the editor has not approved"</span> <span class="k">do</span>
        <span class="n">let</span><span class="p">(</span><span class="ss">:editor_approved</span><span class="p">)</span> <span class="p">{</span> <span class="kp">false</span> <span class="p">}</span>

        <span class="n">context</span> <span class="s2">"when the post has been translated"</span> <span class="k">do</span>
          <span class="n">let</span><span class="p">(</span><span class="ss">:translated</span><span class="p">)</span> <span class="p">{</span> <span class="kp">true</span> <span class="p">}</span>

          <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">be_editable</span> <span class="p">}</span>
        <span class="k">end</span>

        <span class="n">context</span> <span class="s2">"when the post has not been translated"</span> <span class="k">do</span>
          <span class="n">let</span><span class="p">(</span><span class="ss">:translated</span><span class="p">)</span> <span class="p">{</span> <span class="kp">false</span> <span class="p">}</span>

          <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">be_editable</span> <span class="p">}</span>
        <span class="k">end</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>This is spec is starting to get pretty long and hard to follow. And being
the sort of engineer who is smart enough to survive a zombie apocalypse
you can see that the spec doubles in size every time a new condition is
added.</p>

<p>That’s not tenable. Let’s rewind and see if we can find a better way.</p>

<p>Before the translation requirement, the spec looked like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">Post</span> <span class="k">do</span>
  <span class="n">describe</span> <span class="s2">"#editable?"</span> <span class="k">do</span>
    <span class="n">subject</span> <span class="k">do</span>
      <span class="no">Post</span><span class="p">.</span><span class="nf">new</span> <span class="ss">published_at: </span><span class="n">published_at</span><span class="p">,</span> <span class="ss">editor_approved: </span><span class="n">editor_approved</span>
    <span class="k">end</span>

    <span class="n">context</span> <span class="s2">"when the post is published"</span> <span class="k">do</span>
      <span class="n">let</span><span class="p">(</span><span class="ss">:published_at</span><span class="p">)</span> <span class="p">{</span> <span class="no">Time</span><span class="p">.</span><span class="nf">now</span><span class="p">.</span><span class="nf">utc</span> <span class="p">}</span>

      <span class="n">context</span> <span class="s2">"when the editor has approved"</span> <span class="k">do</span>
        <span class="n">let</span><span class="p">(</span><span class="ss">:editor_approved</span><span class="p">)</span> <span class="p">{</span> <span class="kp">true</span> <span class="p">}</span>

        <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">be_editable</span> <span class="p">}</span>
      <span class="k">end</span>

      <span class="n">context</span> <span class="s2">"when the editor has not approved"</span> <span class="k">do</span>
        <span class="n">let</span><span class="p">(</span><span class="ss">:editor_approved</span><span class="p">)</span> <span class="p">{</span> <span class="kp">false</span> <span class="p">}</span>

        <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">be_editable</span> <span class="p">}</span>
      <span class="k">end</span>
    <span class="k">end</span>

    <span class="n">context</span> <span class="s2">"when the post is not published"</span> <span class="k">do</span>
      <span class="n">let</span><span class="p">(</span><span class="ss">:published_at</span><span class="p">)</span> <span class="p">{</span> <span class="kp">nil</span> <span class="p">}</span>

      <span class="n">context</span> <span class="s2">"when the editor has approved"</span> <span class="k">do</span>
        <span class="n">let</span><span class="p">(</span><span class="ss">:editor_approved</span><span class="p">)</span> <span class="p">{</span> <span class="kp">true</span> <span class="p">}</span>

        <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">be_editable</span> <span class="p">}</span>
      <span class="k">end</span>

      <span class="n">context</span> <span class="s2">"when the editor has not approved"</span> <span class="k">do</span>
        <span class="n">let</span><span class="p">(</span><span class="ss">:editor_approved</span><span class="p">)</span> <span class="p">{</span> <span class="kp">false</span> <span class="p">}</span>

        <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">be_editable</span> <span class="p">}</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>The specification is structured like a binary tree with an expectation at
each terminal leaf. Every condition we add adds another level to the tree,
doubles the number of terminal leaves, and doubles the number of
expectations.</p>

<p>Part of the reason you’ve survived this long is your ability to tell
humans apart from zombies. When you apply the same pattern-matching skills
to this spec you notice one of the expectations is different from all of
the rest.</p>

<p>In one situation the post is editable. All the other specs are exceptions
to that situation. When you re-factor the specs to reflect that they look
more like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">Post</span> <span class="k">do</span>
  <span class="n">describe</span> <span class="s2">"#editable?"</span> <span class="k">do</span>
    <span class="n">subject</span> <span class="k">do</span>
      <span class="no">Post</span><span class="p">.</span><span class="nf">new</span> <span class="ss">published_at: </span><span class="n">published_at</span><span class="p">,</span> <span class="ss">editor_approved: </span><span class="n">editor_approved</span>
    <span class="k">end</span>

    <span class="n">let</span><span class="p">(</span><span class="ss">:published_at</span><span class="p">)</span> <span class="p">{</span> <span class="kp">nil</span> <span class="p">}</span>
    <span class="n">let</span><span class="p">(</span><span class="ss">:editor_approved</span><span class="p">)</span> <span class="p">{</span> <span class="kp">false</span> <span class="p">}</span>

    <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">be_editable</span> <span class="p">}</span>

    <span class="n">context</span> <span class="s2">"when the post is published"</span> <span class="k">do</span>
      <span class="n">let</span><span class="p">(</span><span class="ss">:published_at</span><span class="p">)</span> <span class="p">{</span> <span class="no">Time</span><span class="p">.</span><span class="nf">now</span><span class="p">.</span><span class="nf">utc</span> <span class="p">}</span>

      <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">be_editable</span> <span class="p">}</span>
    <span class="k">end</span>

    <span class="n">context</span> <span class="s2">"when the editor has approved"</span> <span class="k">do</span>
      <span class="n">let</span><span class="p">(</span><span class="ss">:editor_approved</span><span class="p">)</span> <span class="p">{</span> <span class="kp">true</span> <span class="p">}</span>

      <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">be_editable</span> <span class="p">}</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>The spec is now more concise, easier to read, and easier to modify. When
you add the translation requirement it looks like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">Post</span> <span class="k">do</span>
  <span class="n">describe</span> <span class="s2">"#editable?"</span> <span class="k">do</span>
    <span class="n">subject</span> <span class="k">do</span>
      <span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span>
        <span class="ss">published_at: </span><span class="n">published_at</span><span class="p">,</span>
        <span class="ss">editor_approved: </span><span class="n">editor_approved</span><span class="p">,</span>
        <span class="ss">translated: </span><span class="n">translated</span><span class="p">,</span>
      <span class="p">)</span>
    <span class="k">end</span>

    <span class="n">let</span><span class="p">(</span><span class="ss">:published_at</span><span class="p">)</span> <span class="p">{</span> <span class="kp">nil</span> <span class="p">}</span>
    <span class="n">let</span><span class="p">(</span><span class="ss">:editor_approved</span><span class="p">)</span> <span class="p">{</span> <span class="kp">false</span> <span class="p">}</span>
    <span class="n">let</span><span class="p">(</span><span class="ss">:translated</span><span class="p">)</span> <span class="p">{</span> <span class="kp">false</span> <span class="p">}</span>

    <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">be_editable</span> <span class="p">}</span>

    <span class="n">context</span> <span class="s2">"when the post is published"</span> <span class="k">do</span>
      <span class="n">let</span><span class="p">(</span><span class="ss">:published_at</span><span class="p">)</span> <span class="p">{</span> <span class="no">Time</span><span class="p">.</span><span class="nf">now</span><span class="p">.</span><span class="nf">utc</span> <span class="p">}</span>

      <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">be_editable</span> <span class="p">}</span>
    <span class="k">end</span>

    <span class="n">context</span> <span class="s2">"when the editor has approved"</span> <span class="k">do</span>
      <span class="n">let</span><span class="p">(</span><span class="ss">:editor_approved</span><span class="p">)</span> <span class="p">{</span> <span class="kp">true</span> <span class="p">}</span>

      <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">be_editable</span> <span class="p">}</span>
    <span class="k">end</span>

    <span class="n">context</span> <span class="s2">"when the post has been translated"</span> <span class="k">do</span>
      <span class="n">let</span><span class="p">(</span><span class="ss">:translated</span><span class="p">)</span> <span class="p">{</span> <span class="kp">true</span> <span class="p">}</span>

      <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">not_to</span> <span class="n">be_editable</span> <span class="p">}</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>When your objects have one normal case and a series of exceptions it makes
sense to organize your specs that way. They will be shorter, clearer,
easier to understand, and easier to modify; exactly what you will need
them to be in order to thrive in the post-zombie apocalypse world.</p>

      </main>
    </div>
  </div>
</div>

      </main>
    

    

    


  
<footer class="usa-footer">

  

  
    
    
    
    
  <div class="usa-footer__primary-section">
    <nav class="usa-footer__nav" aria-label="Footer navigation">
      <ul class="grid-row grid-gap">
        
        <li class="mobile-lg:grid-col-4 desktop:grid-col-auto usa-footer__primary-content">
          <a class="usa-footer__primary-link" href="https://www.talariasoftware.com">
            Talaria Software
          </a>
        </li>
        
        <li class="mobile-lg:grid-col-4 desktop:grid-col-auto usa-footer__primary-content">
          <a class="usa-footer__primary-link" href="https://www.neverbust.com">
            Neverbust
          </a>
        </li>
        
        <li class="mobile-lg:grid-col-4 desktop:grid-col-auto usa-footer__primary-content">
          <a class="usa-footer__primary-link" href="https://earlywords.io">
            EarlyWords
          </a>
        </li>
        
        <li class="mobile-lg:grid-col-4 desktop:grid-col-auto usa-footer__primary-content">
          <a class="usa-footer__primary-link" href="/everything">
            Writing
          </a>
        </li>
        
      </ul>
    </nav>
  </div>
  

  
  <div class="usa-footer__secondary-section">
    <div class="grid-container">
      <div class="grid-row grid-gap">
        <div class="usa-footer__logo grid-row mobile-lg:grid-col-6 mobile-lg:grid-gap-2">
          
            <div class="mobile-lg:grid-col-auto">
                
                  <img class="usa-footer__logo-img" src="/images/about-me/actor.jpg" alt="Damien Burke">
                
              </div>
            
          

          
          <div class="mobile-lg:grid-col-auto">
            <h3 class="usa-footer__logo-heading">Damien Burke</h3>
          </div>
          
        </div>

        
        <div class="usa-footer__contact-links mobile-lg:grid-col-6">
          
          
            <div class="usa-footer__social-links grid-row grid-gap-1">
              <div class="grid-col-auto">
                
                  <a class="usa-social-link usa-social-link--twitter" href="https://twitter.com/exmember">
                    <span>Twitter</span>
                  </a>
                
                  <a class="usa-social-link usa-social-link--github" href="https://github.com/exmember">
                    <span>GitHub</span>
                  </a>
                
                  <a class="usa-social-link usa-social-link--linkedin" href="https://www.linkedin.com/in/damienburke/">
                    <span>LinkedIn</span>
                  </a>
                
              </div>
            </div>
          
          
            <h3 class="usa-footer__contact-heading">Contact</h3>
            
            
              <address class="usa-footer__address">
                
                <div class="usa-footer__contact-info grid-row grid-gap">
                
                    <div class="grid-col-auto">
                      <a href="mailto:damien@damienburke.com">
                        damien@damienburke.com
                      </a>
                    </div>
                
                </div>
              </address>

              
          
        
      </div>
      
      </div>
    </div>
  </div>
  

</footer>





    





  
    
      <script src="/assets/uswds/js/uswds.min.js" async></script>
    

  
    






  </body>
</html>
